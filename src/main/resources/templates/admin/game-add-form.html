<!DOCTYPE html>
<html lang="pl"
      xmlns:th="https://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>Dodaj producenta gry</title>
</head>
<body>
<main class="main-content margin-box" layout:fragment="content">
    <h2 class="list-heading">Panel administracyjny</h2>
    <h3 class="list-description">Dodaj nową grę</h3>

    <form action="" method="post" enctype="multipart/form-data"
          class="add-content-form" id="add-content-form" autocomplete="off" th:object="${game}">

        <div class="form-button-container">
            <a class="form-back-button" href="#" th:href="@{/admin}">
                <i class="fa-solid fa-chevron-left logo"></i>wróć
            </a>
            <button class="form-back-button" onclick="clearGameForm()" type="button">wyczyść
                <i class="fa-solid fa-rotate-right logo"></i>
            </button>
        </div>

        <label for="gameTitle">Tytuł (max 120 znaków)</label>
        <input type="text" id="gameTitle" placeholder="spacja = lista gier"
               th:field="*{title}"
               th:classappend="${#fields.hasErrors('title')} ?'error-input':'' "
               aria-autocomplete="none"
               autocomplete="off"
               autocorrect="off"
               onkeyup="validateGameTitle()">
        <ul id="show-suggestion-list" class="hide-notification"></ul>
        <div class="input-validation-container">
            <p class="notification-error" id="title-error"></p>
            <p class="notification-error" th:errors="*{title}">Powiadomienie</p>
        </div>

        <label for="gameShortDescription">Krótki opis(100 - 1000 znaków)</label>
        <textarea rows="5" id="gameShortDescription"
                  th:field="*{shortDescription}"
                  th:classappend="${#fields.hasErrors('shortDescription')} ? 'error-input':'' "
                  aria-autocomplete="none"
                  autocomplete="off"
                  autocorrect="off"
                  onkeyup="validateGameShortDescription()">
        </textarea>

        <label for="gameLongDescription">Pełny opis(200 - 100.000 znaków)</label>
        <textarea rows="14" id="gameLongDescription" class="contentEditor"
                  th:field="*{description}"
                  th:classappend="${#fields.hasErrors('description')} ? 'error-input': '' "
                  aria-autocomplete="none"
                  autocomplete="off"
                  autocorrect="off"
                  onkeyup="validateGameLongDescription()">
        </textarea>
        <div class="input-validation-container">
            <p class="notification-error" id="long-description-error"></p>
            <p class="notification-error" th:errors="*{description}">Powiadomienie</p>
        </div>

        <div class="input-validation-container">
            <p class="notification-error" id="short-description-error"></p>
            <p class="notification-error" th:errors="*{shortDescription}">Powiadomienie</p>
        </div>

        <label for="TrailerId">Id Trailera DailyMotion (max 30 znaków)</label>
        <input type="text" id="TrailerId"
               th:field="*{dailymotionTrailerId}"
               th:classappend="${#fields.hasErrors('dailymotionTrailerId')} ?'error-input':'' "
               aria-autocomplete="none"
               autocomplete="off"
               autocorrect="off"
               onkeyup="validateGameTrailerId()">
        <div class="input-validation-container">
            <p class="notification-error" id="trailerId-error"></p>
            <p class="notification-error" th:errors="*{dailymotionTrailerId}">Powiadomienie</p>
        </div>

        <div class="input-border">
            <label for="producerName">Producent (wybierz z listy)</label>
            <input type="text" id="producerName"
                   th:field="*{producer}"
                   th:classappend="${#fields.hasErrors('producer')} ?'error-input':'' "
                   aria-autocomplete="none"
                   autocomplete="off"
                   autocorrect="off"
                   onkeyup="validateGameProducer()">
            <ul id="show-producers-list" class="hide-notification"></ul>

            <label for="producer-value">Wybrany producent</label>
            <input readonly type="text" id="producer-value">

            <div class="input-validation-container">
                <p class="notification-error" id="gameProducer-error"></p>
                <p class="notification-error" th:errors="*{producer}">Powiadomienie</p>
            </div>
        </div>

        <div class="input-border">
            <label for="publisherName">Wydawca (wybierz z listy)</label>
            <input type="text" id="publisherName"
                   th:field="*{publisher}"
                   th:classappend="${#fields.hasErrors('publisher')} ?'error-input':'' "
                   aria-autocomplete="none"
                   autocomplete="off"
                   autocorrect="off"
                   onkeyup="validateGamePublisher()">
            <ul id="show-publishers-list" class="hide-notification"></ul>

            <label for="publisher-value">Wybrany wydawca</label>
            <input readonly type="text" id="publisher-value">

            <div class="input-validation-container">
                <p class="notification-error" id="gamePublisher-error"></p>
                <p class="notification-error" th:errors="*{publisher}">Powiadomienie</p>
            </div>
        </div>

        <label for="releaseDate">Data wydania</label>
        <input type="date" id="releaseDate"
               th:field="*{releaseYear}"
               th:classappend="${#fields.hasErrors('releaseYear')} ?'error-input':'' "
               aria-autocomplete="none"
               autocomplete="off"
               autocorrect="off"
               onkeyup="validateGameReleaseDate()">
        <div class="input-validation-container">
            <p class="notification-error" id="releaseDate-error"></p>
            <p class="notification-error" th:errors="*{releaseYear}">Powiadomienie</p>
        </div>

        <div class="input-border">
            <label for="gameCategories">Kategorie (wybierz z listy)</label>
            <input type="text" id="gameCategories"
                   th:classappend="${#fields.hasErrors('category')} ?'error-input':'' "
                   th:field="*{category}"
                   aria-autocomplete="none"
                   autocomplete="off"
                   autocorrect="off"
                   onkeyup="validateGameCategories()">
            <ul id="show-categories-list" class="hide-notification"></ul>

            <label for="categories-value">Wybrane kategorie</label>
            <input readonly type="text" id="categories-value">

            <div class="input-validation-container">
                <p class="notification-error" id="gameCategories-error"></p>
                <p class="notification-error" th:errors="*{category}">Powiadomienie</p>
            </div>
        </div>

        <div class="input-border">
            <label for="gameModes">Tryby gry (wybierz z listy)</label>

            <div class="checkbox-left-center-container">
                <div class="checkbox-margin-box" th:each="modes,count:${allGameModes}">
                    <label class="checkbox-container">
                        <span th:text="${modes.name}"></span>
                        <input type="checkbox" th:name="'game.gameModes['+${count.index}+'].name'" th:value="${modes.name}" th:id="${modes.name}"
                               onclick="validateGameMode()">
                        <span class="checkmark"></span>
                    </label>
                    <input type="text" id="gameModes"
                           th:classappend="${#fields.hasErrors('gameModes')} ?'error-input':'' "
                           th:name="'game.gameModes['+${count.index}+'].description'"
                           aria-autocomplete="none"
                           autocomplete="off"
                           autocorrect="off"
                           onkeyup="validateGameModes()"/>
                </div>
            </div>

            <div class="input-validation-container">
                <p class="notification-error" id="game-modes-error"></p>
                <p class="notification-error" th:errors="*{gameModes}">Powiadomienie</p>
            </div>
        </div>

        <div class="input-border">
            <label for="gamePlatforms">Platformy (wybierz z listy)</label>
            <input type="text" id="gamePlatforms"
                   th:classappend="${#fields.hasErrors('platform')} ?'error-input':'' "
                   th:field="*{platform}"
                   aria-autocomplete="none"
                   autocomplete="off"
                   autocorrect="off"
                   onkeyup="validateGamePlatforms()">
            <ul id="show-game-platform-list" class="hide-notification"></ul>

            <label for="game-modes-value">Wybrane platformy</label>
            <input readonly type="text" id="game-platforms-value">

            <div class="input-validation-container">
                <p class="notification-error" id="game-platforms-error"></p>
                <p class="notification-error" th:errors="*{platform}">Powiadomienie</p>
            </div>
        </div>

        <label for="poster">Plakat gry (jpg, png, jpeg)</label>
        <input type="file" id="poster" class="input-file" accept="image/jpeg,image/jpg,image/png"
               th:field="*{poster}"
               th:classappend="${#fields.hasErrors('poster')} ?'error-input':'' "
               aria-autocomplete="none"
               autocomplete="off"
               autocorrect="off"
               onkeyup="validatePoster()">
        <div class="input-validation-container">
            <p class="notification-error" id="poster-error"></p>
            <p class="notification-error" th:errors="${game.poster}">Powiadomienie</p>
        </div>

        <div class="checkbox-margin-box">
            <label class="checkbox-container">Gra polecana przez redakcje
                <input type="checkbox" name="isPromoted" id="isPromoted" onclick="validateIsPromoted()">
                <span class="checkmark"></span>
            </label>
        </div>
        <button onclick="return validateGameForm()" type="submit" id="form-button">Dodaj</button>
    </form>
    <script src="/scripts/gameFormValidation.js" th:src="@{/scripts/gameFormValidation.js}"></script>
    <script src="https://cdn.tiny.cloud/1/he5czymkzvg283r2v9jzaxf9ppuvobtcwngw9chci0rjn4aa/tinymce/6/tinymce.min.js"
            referrerpolicy="origin"></script>
    <script>
        tinymce.init({
            selector: '.contentEditor',
            plugins: "wordcount lists link preview pagebreak autoresize Search and Replace",
            toolbar: 'undo |redo| numlist |bullist | outdent |indent| bold | h2 | link | preview|',
            menubar: '',
            toolbar_sticky: false,
            icons: 'thin',
            content_css: "/styles/tinymce.css",
            setup: function (editor) {
                editor.on('keyup', function (e) {
                    validateGameLongDescription();
                });
            },
            min_height: 400,
            max_height: 800,
        });

    </script>
</main>
</body>
</html>